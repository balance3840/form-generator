<!DOCTYPE html>
<html dir="ltr" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />
    <title>Stencil Component Starter</title>

    <script type="module" src="/build/form-generator.esm.js"></script>
    <script nomodule src="/build/form-generator.js"></script>
  </head>
  <body>

    <re-form-generator schema='[
    {
      "type": "input",
      "id": "name",
      "inputType": "text",
      "inputName": "name",
      "visible": true,
      "label": "Channel name",
      "model": "channelName",
      "readonly": false,
      "disabled": false,
      "placeholder": "# e.g. book-club",
      "validationType": "string",
      "validations": [
        {
          "name": "required"
        }
      ],
      "layout": {
        "row": "row1",
        "cols": 6,
        "group": "details",
        "groupTitle": "Details"
      }
    },
    {
      "type": "input",
      "id": "type",
      "inputType": "text",
      "inputName": "type",
      "visible": true,
      "label": "Channel type",
      "model": "channelType",
      "readonly": false,
      "disabled": false,
      "placeholder": "What is the type?",
      "validationType": "string",
      "validations": [
        {
          "name": "required"
        }
      ],
      "layout": {
        "row": "row1",
        "cols": 6,
        "group": "details"
      }
    },
    {
      "type": "select",
      "id": "project",
      "inputName": "project",
      "visible": true,
      "label": "Project",
      "model": "project",
      "readonly": false,
      "disabled": false,
      "placeholder": "Please select a project...",
      "values": [
        { "value": "234", "display": "Project 1", "group": "Best projects" },
        { "value": "235", "display": "Project 2", "group": "Best projects" },
        { "value": "236", "display": "Project 3", "group": "Best projects" },
        { "value": "237", "display": "Project 4", "group": "Worst projects" }
      ],
      "validationType": "string",
      "validations": [
        {
          "name": "required"
        }
      ],
      "layout": {
        "group": "details"
      }
    },
    {
      "type": "textarea",
      "id": "description",
      "inputName": "last-name",
      "visible": true,
      "label": "Channel description",
      "model": "channelDescription",
      "readonly": false,
      "disabled": false,
      "placeholder": "What is this channel about?",
      "validationType": "string",
      "validations": [
        {
          "name": "required"
        }
      ],
      "layout": {
        "group": "details"
      }
    },
    {
      "type": "toggle",
      "id": "mandatory",
      "inputName": "mandatory",
      "inputWrapperClass": "two-columns",
      "visible": true,
      "model": "mandatory",
      "readonly": false,
      "disabled": false,
      "validationType": "string",
      "attributes": {
        "value": "1"
      }
    },
    {
      "type": "input",
      "inputType": "checkbox",
      "label": "This is a test label",
      "id": "test",
      "inputName": "test",
      "visible": true,
      "model": "test",
      "readonly": false,
      "disabled": false,
      "validationType": "string",
      "validations": [
        {
          "name": "required"
        }
      ],
      "attributes": {
        "value": "1"
      }
    }
    ]' ref="channelForm">
    
      <div slot="field-label@mandatory">
        <label class="input__label">Make channel mandatory</label>
        <p class="input__description">All the tenants from all the project will be invited by default. asdasd</p>
      </div>

    </re-form-generator>

      <br><br>
      <button type="button" onclick="validateForm()">VALIDATE FROM OUTSIDE</button>

      <script>
        const formGenerator = document.querySelector('re-form-generator');
        formGenerator.addEventListener('handleSubmit', event => {  /*console.log(event.detail)*/ })
        formGenerator.addEventListener('onValidationError', event => {  console.log(event.detail) })

        async function validateForm() {
          await customElements.whenDefined('re-form-generator');
          const formGenerator = document.querySelector('re-form-generator');
          const errors = await formGenerator.submit();
          console.log({errors});
        };
      </script>
  </body>
</html>
